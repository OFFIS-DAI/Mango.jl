<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation · Mango.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Mango.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../agent/">Agents</a></li><li><a class="tocitem" href="../container/">Container</a></li><li><a class="tocitem" href="../role/">Roles</a></li><li class="is-active"><a class="tocitem" href>Simulation</a><ul class="internal"><li><a class="tocitem" href="#Create-and-stepping-a-simulation-container"><span>Create and stepping a simulation container</span></a></li><li><a class="tocitem" href="#Discrete-event-vs-continous-stepping"><span>Discrete event vs continous stepping</span></a></li><li><a class="tocitem" href="#Communication-simulation"><span>Communication simulation</span></a></li><li><a class="tocitem" href="#Agent-based-modeling"><span>Agent-based modeling</span></a></li></ul></li><li><a class="tocitem" href="../encode_decode/">Codecs</a></li><li><a class="tocitem" href="../scheduling/">Scheduling</a></li><li><a class="tocitem" href="../topology/">Topologies</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../legals/">Legals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/OFFIS-DAI/Mango.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Simulation-Container"><a class="docs-heading-anchor" href="#Simulation-Container">Simulation Container</a><a id="Simulation-Container-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-Container" title="Permalink"></a></h1><p>The simulation container has the same role as the real-time container and therefore acts as communication and interaction interface to the environment. The simulation container maintains an interal simulation time and only executes tasks and delivers messages according to the requested step_sizes. It can be stepped in the continous mode or the discrete event mode. Further the container manages a common environment the agents can interact with as base structure for agent-based modeling simulations.</p><h2 id="Create-and-stepping-a-simulation-container"><a class="docs-heading-anchor" href="#Create-and-stepping-a-simulation-container">Create and stepping a simulation container</a><a id="Create-and-stepping-a-simulation-container-1"></a><a class="docs-heading-anchor-permalink" href="#Create-and-stepping-a-simulation-container" title="Permalink"></a></h2><p>To create a simulation container, it is advised to use <code>create_simulation_container</code>. This method will create a clock with the given simulation time and set default for the communication simulation and the general task simulation. In most cases the default task simulation will be what you desire. The communication simulation object (based on the abstract type <code>CommunicationSimulation</code>) is used to determine the delays of the messages in the simulation, while the task simulation determines the way the tasks are scheduled (within a time step, using parallelization etc.) in the simulation. </p><p>In the following example a simple simulation is executed.</p><pre><code class="language-julia hljs"># Arbitrary agent definition
@agent struct SimAgent
end

# Create a communication simulator, the simple communication simulator works with static delays between specific agents and a global default, here 0
comm_sim = SimpleCommunicationSimulation(default_delay_s=0)
# Set the simulation time to an initial value
container = create_simulation_container(DateTime(Millisecond(1000)), communication_sim=comm_sim)

# Creating agents and registering, no difference here to the real time container
agent1 = SimAgent(0)
agent2 = SimAgent(0)
register(container, agent1)
register(container, agent2)

# Send a message from agent2 to agent1, the message will be written to a queue instead of processed by some protocol
send_message(agent2, &quot;Hello Friends, this is RSc!&quot;, AgentAddress(aid=agent1.aid))

# in this stepping call the message will be delivered and handled to/by the agent1  
# step_size=1, if no size is specified the simulation will work as discrete event simulation, executing all tasks occurring on the next event time.
stepping_result = step_simulation(container, 1)</code></pre><h2 id="Discrete-event-vs-continous-stepping"><a class="docs-heading-anchor" href="#Discrete-event-vs-continous-stepping">Discrete event vs continous stepping</a><a id="Discrete-event-vs-continous-stepping-1"></a><a class="docs-heading-anchor-permalink" href="#Discrete-event-vs-continous-stepping" title="Permalink"></a></h2><p>Mango.jl support discrete event and continous stepping. Discrete event stepping means that no advance time is provided instead the simulation jumps to the next event time and executes every tasks, delivers every message scheduled at this next event time. For example, you set up a simultion in which three tasks are in the queue at the event times 1,1,3; then the next step would execute the first two, and the following would execute the last task (given no new tasks are created). With continous stepping the user has to provide a step<em>size (in seconds), which will be used to execute every task until `simulation</em>time + step_size` ordered by the time of the individual tasks. It is also possible to mix both styles.</p><pre><code class="language-julia hljs"># continous
stepping_result = step_simulation(container, 1)
# discrete event
stepping_result = step_simulation(container)</code></pre><h2 id="Communication-simulation"><a class="docs-heading-anchor" href="#Communication-simulation">Communication simulation</a><a id="Communication-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Communication-simulation" title="Permalink"></a></h2><p>Mango.jl is generally designed to be extenable, this is also true for the usage of a communication simulator in a Mango.jl-Simulation. To use a custom communication simulator, you can simply set the keyword argument <code>communication_sim</code> to a struct of the abstract type <code>CommunicationSimulation</code>. To implement this type, you need to add a fitting method to <code>Mango.calculate_communication::CommunicationSimulation, clock::Clock, messages::Vector{MessagePackage})::CommunicationSimulationResult</code>. This method will then be called in the simulation loop at least once and repeatedly when new messages arrive and therefore a new state has to be determined.</p><p>The default communication simulator is <a href="@ref">SimpleCommunicationSimulation</a>. This simulator uses a default static delay together with a dictionary containing delays per link between individual agents.</p><h2 id="Agent-based-modeling"><a class="docs-heading-anchor" href="#Agent-based-modeling">Agent-based modeling</a><a id="Agent-based-modeling-1"></a><a class="docs-heading-anchor-permalink" href="#Agent-based-modeling" title="Permalink"></a></h2><p>The simulation container can also be used for simple agent-based modeling simulations. In agent-based modeling, units (e.g. people, cars, ...) are modeled using agents and their interaction between these agents and further units in a common world/environment. To support this the simulation container provides <code>on_step(agent::Agent, world::World, clock::Clock, step_size_s::Real)</code> (also defined on <code>Role</code>). </p><p>The <code>World</code> can contain common objects to interact with and contains a <code>Space</code> struct which can define the type of world modeled (2D/3D/Graph/...). This struct also contains the positions of all agents. Currently there is only the <code>Space2D</code> implementation with simple cartesian coordinates. </p><p>Please note that Mango.jl focuses on agent-based control, agent-based communication and therefore currently does not provide much supporting implementations for complex agent-based modeling simulations.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../role/">« Roles</a><a class="docs-footer-nextpage" href="../encode_decode/">Codecs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 3 September 2024 15:00">Tuesday 3 September 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
