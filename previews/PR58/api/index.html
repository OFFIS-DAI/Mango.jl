<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · Mango.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Mango.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../agent/">Agents</a></li><li><a class="tocitem" href="../container/">Container</a></li><li><a class="tocitem" href="../role/">Roles</a></li><li><a class="tocitem" href="../simulation/">Simulation</a></li><li><a class="tocitem" href="../encode_decode/">Codecs</a></li><li><a class="tocitem" href="../scheduling/">Scheduling</a></li><li><a class="tocitem" href="../topology/">Topologies</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Express"><span>Express</span></a></li><li class="toplevel"><a class="tocitem" href="#Agent-and-Roles"><span>Agent and Roles</span></a></li><li class="toplevel"><a class="tocitem" href="#Container"><span>Container</span></a></li><li class="toplevel"><a class="tocitem" href="#Simulation"><span>Simulation</span></a></li><li class="toplevel"><a class="tocitem" href="#Scheduling"><span>Scheduling</span></a></li><li class="toplevel"><a class="tocitem" href="#Topology"><span>Topology</span></a></li><li class="toplevel"><a class="tocitem" href="#Encoding/Decoding"><span>Encoding/Decoding</span></a></li></ul></li><li><a class="tocitem" href="../legals/">Legals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/OFFIS-DAI/Mango.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h1 id="Express"><a class="docs-heading-anchor" href="#Express">Express</a><a id="Express-1"></a><a class="docs-heading-anchor-permalink" href="#Express" title="Permalink"></a></h1><p>This part contains basic convenience functions for creating and running Mango.jl simulations. </p><article class="docstring"><header><a class="docstring-binding" id="Mango.activate-Union{Tuple{T}, Tuple{Function, Vector{T}}} where T&lt;:ContainerInterface" href="#Mango.activate-Union{Tuple{T}, Tuple{Function, Vector{T}}} where T&lt;:ContainerInterface"><code>Mango.activate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">activate(runnable, container_list)</code></pre><p>Actvate the container(s), which includes starting the containers and shutting them down after the runnable has been executed. </p><p>In most cases the runnable will execute code, which starts some process  (e.g. some distributed negotiation) in the system to define the objective of the agent system.</p><p>Generally this function is a convenience function and is equivalent to starting all containers  in the list, executing the code represented by <code>runnable</code> and shuting down the container again. Further, this function will handle errors occuring while running the <code>runnable</code> and ensure the containers are shutting down.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">activate(your_containers) do 
   # Send the first message to start the system
   send_message(defined_agent, &quot;Starting somethin&quot;, address(other_defined_agent))

   # wait some time
   wait(some_stopping_condition)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add_agent_composed_of-Tuple{ContainerInterface, Vararg{Role}}" href="#Mango.add_agent_composed_of-Tuple{ContainerInterface, Vararg{Role}}"><code>Mango.add_agent_composed_of</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_agent_composed_of(container, roles...)</code></pre><p>Create an agent which is composed of the given roles <code>roles...</code> and register the agent  to the <code>container</code>. </p><p>The agent struct used is an empty struct, it is only used as a container for the roles. The created agent will be returned by the function.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">agent = add_agent_composed_of(your_container, RoleA(), RoleB(), RoleC())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.create_mqtt_container-Tuple{String, Int64, String}" href="#Mango.create_mqtt_container-Tuple{String, Int64, String}"><code>Mango.create_mqtt_container</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_mqtt_container(host, port, client_id; codec=nothing)</code></pre><p>Create a container using an MQTT protocol. </p><p>The <code>host</code> is expected to be the IP-adress of the broker, <code>port</code> is the port of the broker,  the <code>client_id</code> is the id of the client which will be created and connected to the broker.  Optionally you can also provide a codec as tuple of functions (first encode, second decode, see  <a href="#Mango.encode-Tuple{Any}"><code>encode</code></a> and <a href="#Mango.decode"><code>decode</code></a>).</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">agent = create_mqtt_container(&quot;127.0.0.1&quot;, 5555, &quot;MyClient&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.create_tcp_container-Tuple{String, Int64}" href="#Mango.create_tcp_container-Tuple{String, Int64}"><code>Mango.create_tcp_container</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_tcp_container(host, port; codec=nothing)</code></pre><p>Create a container using an TCP protocol. </p><p>The <code>host</code> is expected to be the IP-adress to bind on, <code>port</code> is the port to bind on. Optionally you  can also provide a codec as tuple of functions (first encode, second decode, see  <a href="#Mango.encode-Tuple{Any}"><code>encode</code></a> and <a href="#Mango.decode"><code>decode</code></a>).</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">agent = create_mqtt_container(&quot;127.0.0.1&quot;, 5555, &quot;MyClient&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><h1 id="Agent-and-Roles"><a class="docs-heading-anchor" href="#Agent-and-Roles">Agent and Roles</a><a id="Agent-and-Roles-1"></a><a class="docs-heading-anchor-permalink" href="#Agent-and-Roles" title="Permalink"></a></h1><p>Here, the API for the agent structs created with @agent/@role is listed. </p><article class="docstring"><header><a class="docstring-binding" id="Mango.address-Tuple{Mango.AgentInterface}" href="#Mango.address-Tuple{Mango.AgentInterface}"><code>Mango.address</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">address(agent)</code></pre><p>Return the agent address of the agent as <a href="#Mango.AgentAddress"><code>AgentAddress</code></a> or <a href="#Mango.MQTTAddress"><code>MQTTAddress</code></a> depending on the protocol.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.aid-Tuple{Mango.AgentInterface}" href="#Mango.aid-Tuple{Mango.AgentInterface}"><code>Mango.aid</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Used internally by the role to get the AID</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.forward_to-Tuple{Mango.AgentInterface, Any, Address, AbstractDict}" href="#Mango.forward_to-Tuple{Mango.AgentInterface, Any, Address, AbstractDict}"><code>Mango.forward_to</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">forward_to(agent, content, forward_to_address, received_meta; kwargs...)</code></pre><p>Forward the message to a specific agent using the metadata received on handling the message. This method essentially simply calls send_message on the input given, but also adds and fills the correct metadata fields to mark the message as forwarded. </p><p>For this the following meta data is set. &#39;forwarded=<code>true</code>&#39;, &#39;forwarded<em>from</em>address=<code>address of the original sender</code>&#39;, &#39;forwarded<em>from</em>id=<code>id of the original sender</code>&#39;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.reply_to-Tuple{Mango.AgentInterface, Any, AbstractDict}" href="#Mango.reply_to-Tuple{Mango.AgentInterface, Any, AbstractDict}"><code>Mango.reply_to</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reply_to(agent, content, received_meta)</code></pre><p>Convenience method to reply to a received message using the meta the agent received. This reduces the regular send<em>message as response `send</em>message(agent, &quot;Pong&quot;, AgentAddress(aid=meta[&quot;sender<em>id&quot;], address=meta[&quot;sender</em>addr&quot;]))<code>to</code>reply_to(agent, &quot;Pong&quot;, meta)`</p><p>Furthermore it guarantees that agent address (including the tracking id, which is part of the address!) is correctly passed to the mango container.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_and_handle_answer-Tuple{Function, Mango.AgentInterface, Any, Address}" href="#Mango.send_and_handle_answer-Tuple{Function, Mango.AgentInterface, Any, Address}"><code>Mango.send_and_handle_answer</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">send_and_handle_answer(
    response_handler::Function(agent, message, meta)::nothing,
    agent::AgentInterface,
    content::Any,
    agent_address::Address;
    calling_object::Any=nothing,
    kwargs...)</code></pre><p>Convenience method for sending tracked messages with response handler to the answer.</p><p>Sends a tracked message with a required response_handler to enable to use the syntax</p><pre><code class="nohighlight hljs">send_and_handle_answer(...) do agent, message, meta
	# handle the answer
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_message-Tuple{Mango.AgentInterface, Any, Address}" href="#Mango.send_message-Tuple{Mango.AgentInterface, Any, Address}"><code>Mango.send_message</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">send_message(agent, content::Any, agent_address::Address; kwargs...,)</code></pre><p>Send a message with the content <code>content</code> to the agent represented by <code>agent_address</code>. </p><p>This method will always set a sender_id. Additionally, further keyword arguments can be defined to fill the  internal meta data of the message.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_tracked_message-Tuple{Mango.AgentInterface, Any, Address}" href="#Mango.send_tracked_message-Tuple{Mango.AgentInterface, Any, Address}"><code>Mango.send_tracked_message</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">send_tracked_message(agent, content, agent_address; 
    response_handler::Function(agent, message, meta)::nothing,
    calling_object::Any=nothing,
    kwargs...,
)</code></pre><p>Send a message with the content <code>content</code> to the agent represented by <code>agent_address</code>. This function will set a generated tracking_id to the address, which allows the identification of the dialog. </p><p>It is possible to define a <code>response_handler</code>, to which a function can be assigned, which handles the answer  to this message call. Note that the resonding agent needs to use the same tracking id in the response, ideally <a href="#Mango.reply_to-Tuple{Mango.AgentInterface, Any, AbstractDict}"><code>reply_to</code></a> is used to achieve this automatically. </p><p>This method will always set a sender_id. Additionally, further keyword arguments can be defines to fill the  internal meta data of the message.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.Address" href="#Mango.Address"><code>Mango.Address</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Supertype of all address types</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.Agent" href="#Mango.Agent"><code>Mango.Agent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Base-type for all agents in mango. Generally exists for type-safety and default implementations across all agents.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.@agent-Tuple{Any}" href="#Mango.@agent-Tuple{Any}"><code>Mango.@agent</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Macro for defining an agent struct. Expects a struct definition as argument.</p><p>The macro does 3 things:</p><ol><li>It adds all baseline fields, defined in AGENT<em>BASELINE</em>FIELDS (the agent context <code>context</code>, the role handler <code>role_handler</code>, and the <code>aid</code>)</li><li>It adds the supertype <code>Agent</code> to the given struct.</li><li>It defines a default constructor, which assigns all baseline fields to predefined default values. As a result you can (and should) create  an agent using only the exclusive fields.</li></ol><p><strong>Example</strong></p><p>For example the usage could like this.</p><pre><code class="language-julia hljs">@agent struct MyAgent
	my_own_field::String
end

# results in

mutable struct MyAgent &lt;: Agent
	# baseline fields...
	my_own_field::String
end
MyAgent(my_own_field) = MyAgent(baseline fields defaults..., my_own_field)

# so youl would construct your agent like this

my_agent = MyAgent(&quot;own value&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.schedule-Tuple{Function, Agent, TaskData}" href="#Base.schedule-Tuple{Function, Agent, TaskData}"><code>Base.schedule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">schedule(f::Function, agent::Agent, data::TaskData)</code></pre><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add-Tuple{Agent, Role}" href="#Mango.add-Tuple{Agent, Role}"><code>Mango.add</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add(agent::Agent, role::Role)</code></pre><p>Add a role to the agent. This will add the role to the internal RoleHandler of the agent and it will bind the RoleContext to the role, which enables the role to interact with its environment.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add_forwarding_rule-Tuple{Agent, AgentAddress, AgentAddress, Bool}" href="#Mango.add_forwarding_rule-Tuple{Agent, AgentAddress, AgentAddress, Bool}"><code>Mango.add_forwarding_rule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_forwarding_rule(agent, from_addr::AgentAddress, to_address::AgentAddress, forward_replies::Bool)</code></pre><p>Add a rule for message forwarding.</p><p>After calling the agent will auto-forward every message coming from <code>from_addr</code> to <code>to_address</code>. If forward<em>replies is set, all replies from `to</em>address<code>are forwarded back to</code>from_addr`.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add_service!-Tuple{Agent, Any}" href="#Mango.add_service!-Tuple{Agent, Any}"><code>Mango.add_service!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_service!(agent, service)</code></pre><p>Add a service to the agent. Every service can exists exactly one time (stored by type).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.delete_forwarding_rule-Tuple{Agent, AgentAddress, Union{Nothing, AgentAddress}}" href="#Mango.delete_forwarding_rule-Tuple{Agent, AgentAddress, Union{Nothing, AgentAddress}}"><code>Mango.delete_forwarding_rule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">delete_forwarding_rule(agent, from_addr::AgentAddress, to_address::Union{Nothing,AgentAddress})</code></pre><p>Delete an added forwarding rule. If <code>to_address</code> is not set, all rules are removed matching <code>from_addr</code>. If it set, both addresses need to match.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.handle_message-Tuple{Agent, Any, Any}" href="#Mango.handle_message-Tuple{Agent, Any, Any}"><code>Mango.handle_message</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">handle_message(agent::Agent, message::Any, meta::Any)</code></pre><p>Defines a function for an agent, which will be called when a message is dispatched to the agent. This methods will be called with any arriving message (according to the multiple dispatch of julia).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.on_ready-Tuple{Agent}" href="#Mango.on_ready-Tuple{Agent}"><code>Mango.on_ready</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">on_ready(agent::Agent)</code></pre><p>Lifecycle Hook-in function called when the agent system as a whole is ready, the  hook-in has to be manually activated using notify_ready(container::Container)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.on_start-Tuple{Agent}" href="#Mango.on_start-Tuple{Agent}"><code>Mango.on_start</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">on_start(agent::Agent)</code></pre><p>Lifecycle Hook-in function called when the container of the agent has been started, depending on the container type it may not be called (if there is no start at all,  f.e. the simulation container)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.roles-Tuple{Agent}" href="#Mango.roles-Tuple{Agent}"><code>Mango.roles</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">roles(agent)</code></pre><p>Return all roles of the given agent</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.service_of_type-Union{Tuple{T}, Tuple{Agent, Type{T}}, Tuple{Agent, Type{T}, Union{Nothing, T}}} where T" href="#Mango.service_of_type-Union{Tuple{T}, Tuple{Agent, Type{T}}, Tuple{Agent, Type{T}, Union{Nothing, T}}} where T"><code>Mango.service_of_type</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">service_of_type(agent, type::Type{T}, default=nothing)::Union{T,Nothing} where {T}</code></pre><p>Return the current agent service of the type <code>type</code>. </p><p>If a default is set, this default service will be added to the agent as service of te type `type. The function is especially useful if you want to extend the functionality of the agent without having to change the internals of the agent, as this functions enables the user to add  arbitrary data to the agent on which functions can be defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.services-Tuple{Agent}" href="#Mango.services-Tuple{Agent}"><code>Mango.services</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">services(agent)::Dict{DataType,Any}</code></pre><p>Return a list of services, which were added to the agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.shutdown-Tuple{Agent}" href="#Mango.shutdown-Tuple{Agent}"><code>Mango.shutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shutdown(agent)</code></pre><p>Will be called on shutdown of the container, in which the agent is living</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.stop_all_tasks-Tuple{Agent}" href="#Mango.stop_all_tasks-Tuple{Agent}"><code>Mango.stop_all_tasks</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stop_all_tasks(agent::Agent)</code></pre><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.stop_and_wait_for_all_tasks-Tuple{Agent}" href="#Mango.stop_and_wait_for_all_tasks-Tuple{Agent}"><code>Mango.stop_and_wait_for_all_tasks</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stop_and_wait_for_all_tasks(agent::Agent)</code></pre><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.stop_task-Tuple{Agent, Task}" href="#Mango.stop_task-Tuple{Agent, Task}"><code>Mango.stop_task</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stop_task(agent::Agent, t::Task)</code></pre><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.wait_for_all_tasks-Tuple{Agent}" href="#Mango.wait_for_all_tasks-Tuple{Agent}"><code>Mango.wait_for_all_tasks</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">wait_for_all_tasks(agent::Agent)</code></pre><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.AgentContext" href="#Mango.AgentContext"><code>Mango.AgentContext</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Context of the agent. Represents the environment for the specific agent. Therefore it includes a  connection to the container, including all functions used for interacting with the environment for the agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.AgentRoleHandler" href="#Mango.AgentRoleHandler"><code>Mango.AgentRoleHandler</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Internal data regarding the roles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.@role-Tuple{Any}" href="#Mango.@role-Tuple{Any}"><code>Mango.@role</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Macro for defining a role struct. Expects a struct definition as argument.</p><p>The macro does 3 things:</p><ol><li>It adds all baseline fields, defined in ROLE<em>BASELINE</em>FIELDS (the role context)</li><li>It adds the supertype <code>Role</code> to the given struct.</li><li>It defines a default constructor, which assigns all baseline fields to predefined default values. As a result you can (and should) create  a role using only the exclusive fields.</li></ol><p>For example the usage could like this.</p><pre><code class="language-julia hljs">@role struct MyRole
	my_own_field::String
end

# results in

mutable struct MyRole &lt;: Agent
	# baseline fields...
	my_own_field::String
end
MyRole(my_own_field) = MyRole(baseline fields defaults..., my_own_field)

# so youl would construct your role like this

my_roel = MyRole(&quot;own value&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.@shared-Tuple{Any}" href="#Mango.@shared-Tuple{Any}"><code>Mango.@shared</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Mark the field as shared across roles, this will implicitly </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.schedule-Tuple{Function, Role, TaskData}" href="#Base.schedule-Tuple{Function, Role, TaskData}"><code>Base.schedule</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Delegates to the scheduler <code>Scheduler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.address-Tuple{Role}" href="#Mango.address-Tuple{Role}"><code>Mango.address</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get AgentAddress of the parent agent</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.aid-Tuple{Role}" href="#Mango.aid-Tuple{Role}"><code>Mango.aid</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get AID of the parent agent</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.bind_context-Tuple{Role, RoleContext}" href="#Mango.bind_context-Tuple{Role, RoleContext}"><code>Mango.bind_context</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Internal function, used to initialize to role for a specified agent</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.emit_event-Tuple{Role, Any}" href="#Mango.emit_event-Tuple{Role, Any}"><code>Mango.emit_event</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Emit an event to their subscriber</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.get_model-Tuple{Role, DataType}" href="#Mango.get_model-Tuple{Role, DataType}"><code>Mango.get_model</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get a shared model from the pool. If the model does not exist yet, it will be created. Only types with default constructor are allowed!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.handle_event-Tuple{Role, Role, Any}" href="#Mango.handle_event-Tuple{Role, Role, Any}"><code>Mango.handle_event</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Default function for arriving events, which get dispatched to the role.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.handle_message-Tuple{Role, Any, Any}" href="#Mango.handle_message-Tuple{Role, Any, Any}"><code>Mango.handle_message</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Default function for arriving messages, which get dispatched to the role. This function will be called for every message arriving at the agent of the role.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.on_ready-Tuple{Role}" href="#Mango.on_ready-Tuple{Role}"><code>Mango.on_ready</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Lifecycle Hook-in function called when the agent system as a whole is ready, the  hook-in has to be manually activated using notify_ready(container::Container)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.on_start-Tuple{Role}" href="#Mango.on_start-Tuple{Role}"><code>Mango.on_start</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Lifecycle Hook-in function called when the container of the agent has been started, depending on the container type it may not be called (if there is no start at all,  f.e. the simulation container)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.setup-Tuple{Role}" href="#Mango.setup-Tuple{Role}"><code>Mango.setup</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Hook-in function to setup the role, after it has been added to its agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.shutdown-Tuple{Role}" href="#Mango.shutdown-Tuple{Role}"><code>Mango.shutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Hook-in function, which will be called on shutdown of the roles agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.subscribe_event-Tuple{Role, Any, Any, Function}" href="#Mango.subscribe_event-Tuple{Role, Any, Any, Function}"><code>Mango.subscribe_event</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Subscribe to specific types of events.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.subscribe_event-Tuple{Role, Any, Any}" href="#Mango.subscribe_event-Tuple{Role, Any, Any}"><code>Mango.subscribe_event</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Subscribe to specific types of events.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.subscribe_message-Tuple{Role, Function, Function}" href="#Mango.subscribe_message-Tuple{Role, Function, Function}"><code>Mango.subscribe_message</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Subscribe a message handler function (it need to have the signature (role, message, meta)) to the message dispatching. This handler function will be called everytime the given condition function (message, meta -&gt; boolean) evaluates to true when a message arrives at the roles agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.subscribe_send-Tuple{Role, Function}" href="#Mango.subscribe_send-Tuple{Role, Function}"><code>Mango.subscribe_send</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Subscribe a send<em>message hook in function (signature, (role, content, receiver</em>id, receiver_addr; kwargs...)) to the message sending. The hook in function will be called every time a message is sent by the agent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.Role" href="#Mango.Role"><code>Mango.Role</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Defines the type Role, which is the common base types for all roles in mango.</p><p>A Role is a bundled behavivor of an agent, which shall fulfill exactly one  responsibility of an agent - the role. Technically speaking roles are the way to implement the composition pattern for agents, and to introduce modular archetypes, which shall be reused in different contexts. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.RoleContext" href="#Mango.RoleContext"><code>Mango.RoleContext</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The <code>RoleContext</code> connects the role with its environment, which is mostly its agents. This is abstracted using the <code>AgentInterface</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><h1 id="Container"><a class="docs-heading-anchor" href="#Container">Container</a><a id="Container-1"></a><a class="docs-heading-anchor-permalink" href="#Container" title="Permalink"></a></h1><p>This part contains the API related to the container construction, access and management.</p><article class="docstring"><header><a class="docstring-binding" id="Mango.AgentAddress" href="#Mango.AgentAddress"><code>Mango.AgentAddress</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Default AgentAddress base type, where the agent identifier is based on the container created agent id (aid). Used with the TCP protocol.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.ContainerInterface" href="#Mango.ContainerInterface"><code>Mango.ContainerInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Supertype of every container implementation. This acts as an interface to be used by the agents in their contexts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.MQTTAddress" href="#Mango.MQTTAddress"><code>Mango.MQTTAddress</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Connection information for an MQTT topic on a given broker.  Used with the MQTT protocol. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.protocol_addr-Tuple{ContainerInterface}" href="#Mango.protocol_addr-Tuple{ContainerInterface}"><code>Mango.protocol_addr</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Used by the agent to get the protocol addr part</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_message" href="#Mango.send_message"><code>Mango.send_message</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Send a message <code>message using the given container</code>container` to the given address. Additionally, further keyword arguments can be defines to fill the internal meta data of the message.</p><p>This only defines the function API, the actual implementation is done in the core container module.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.Container" href="#Mango.Container"><code>Mango.Container</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The default container struct, representing the container as actor. The container is implemented by composition. This means the container consists of different implementations of base types, which define the behavior of the container itself. That being said, the same container generally able to send messages via different protocols using different codecs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.notify_ready-Tuple{Container}" href="#Mango.notify_ready-Tuple{Container}"><code>Mango.notify_ready</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Mark the agent system as ready, needs to be detected and called manually!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.protocol_addr-Tuple{Container}" href="#Mango.protocol_addr-Tuple{Container}"><code>Mango.protocol_addr</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get protocol addr part</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.register" href="#Mango.register"><code>Mango.register</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Register an agent given the target container <code>container</code>. While registering an aid will be generated and assigned to the agent.</p><p>This function will add the agent to the internal list of the container and will from then on be controlled by the container regarding the messaging activities. That means the container acts as the gateway of the agent defining its possible way to retrieve  messages.</p><p><strong>Args</strong></p><p>suggested_aid: you can provide an aid yourself. The container will always use that aid 	if possible</p><p><strong>Returns</strong></p><p>The actually used aid will be returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_message" href="#Mango.send_message"><code>Mango.send_message</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Send a message <code>message</code> with using the given container <code>container</code> to the agent with the receiver id <code>receiver_id</code>. The receivers address  is used by the chosen protocol to appropriatley route the message to external participants. To specifiy further meta data of the message <code>kwargs</code> should be used.</p><p><strong>Returns</strong></p><p>True if the message has been sent successfully, false otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_message-Tuple{Container, Any, MQTTAddress, Vararg{Any}}" href="#Mango.send_message-Tuple{Container, Any, MQTTAddress, Vararg{Any}}"><code>Mango.send_message</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Send message version for MQTT topics.  Note that there is no local message forwarding here because messages always get pushed to a broker and are not directly addressed to an agennt.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.shutdown-Tuple{Container}" href="#Mango.shutdown-Tuple{Container}"><code>Mango.shutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Shut down the container. It is always necessary to call it for freeing bound resources</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.start-Tuple{Container}" href="#Mango.start-Tuple{Container}"><code>Mango.start</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Starts the container and initialized all its components. After the call the container start to act as the communication layer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.close-Tuple{MQTTProtocol}" href="#Base.close-Tuple{MQTTProtocol}"><code>Base.close</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">close(protocol::MQTTProtocol)</code></pre><p>Disconnect the client from the broker and stop the message loop.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.id-Tuple{MQTTProtocol}" href="#Mango.id-Tuple{MQTTProtocol}"><code>Mango.id</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">id(protocol::MQTTProtocol)</code></pre><p>Return the name the client is registered with at its broker.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.init-Tuple{MQTTProtocol, Function, Function}" href="#Mango.init-Tuple{MQTTProtocol, Function, Function}"><code>Mango.init</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">init(protocol::MQTTProtocol, stop_check::Function, data_handler::Function)</code></pre><p>Initialize the Mosquitto looping task for the provided <code>protocol</code> and forward incoming messages to <code>data_handler</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.notify_register-Tuple{MQTTProtocol, String}" href="#Mango.notify_register-Tuple{MQTTProtocol, String}"><code>Mango.notify_register</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">notify_register(protocol::MQTTProtocol, aid::String; kwargs...)</code></pre><p>Notify the <code>protocol</code> MQTT client that a new agent with <code>aid</code> has been registered. </p><p>Registration expects a kwarg <code>topics</code> to subscribe the agent to.  If any topic is not yet subscribed by the client <code>subscribe</code> is called for it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.parse_id-Tuple{MQTTProtocol, Any}" href="#Mango.parse_id-Tuple{MQTTProtocol, Any}"><code>Mango.parse_id</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">parse_id(_::MQTTProtocol, id::Any)::String</code></pre><p>Return the <code>id</code> of the protocol as string (for compliance with container core).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send-Tuple{MQTTProtocol, String, Any}" href="#Mango.send-Tuple{MQTTProtocol, String, Any}"><code>Mango.send</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">send(protocol::MQTTProtocol, destination::String, message::Any)</code></pre><p>Send a <code>message</code> to topic <code>destination</code> on the clients MQTT broker. </p><p><strong>Returns</strong></p><p>Return value and message id from MQTT library.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.subscribe-Tuple{MQTTProtocol, String}" href="#Mango.subscribe-Tuple{MQTTProtocol, String}"><code>Mango.subscribe</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">subscribe(protocol::MQTTProtocol, topic::String; qos::Int=1)</code></pre><p>Subscribe the MQTT client of the <code>protocol</code> to <code>topic</code> with the given <code>qos</code> setting.</p><p><strong>Returns</strong></p><p>The Mosquitto error code and the message id.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.Protocol" href="#Mango.Protocol"><code>Mango.Protocol</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Type for all implementations of protocols, acts like an interface. A protocol defines the way message are processed and especially sent and received  to an other peer. F.E. A protocol could be to send messages using a plain TCP connection, which would indicate that an internet address (host + port) is required for the communication.</p><p>The parameterized type T indicates type, which defines the address data of the receiver and sender.</p><p>Every protocol has to define two methods.</p><ol><li>send: defines the behavior of the protocol when an agents sends a messages</li><li>init: defines the necessary steps to initialize (especially) the receiver loop and</li></ol><pre><code class="nohighlight hljs">	 therefore accepts a stop check and a data handler function to indicate when the receiver should stop, 
	 respectively how to dispatch the received message to the correct agent</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.id-Union{Tuple{Protocol{T}}, Tuple{T}} where T" href="#Mango.id-Union{Tuple{Protocol{T}}, Tuple{T}} where T"><code>Mango.id</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return the external identifier associated with the protocol (e.g. it could be the host+port, dns name, ...)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.init-Union{Tuple{T}, Tuple{Protocol{T}, Function, Function}} where T" href="#Mango.init-Union{Tuple{T}, Tuple{Protocol{T}, Function, Function}} where T"><code>Mango.init</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Initialized the protocols internal loops (if exists). In most implementation this would mean that the receiver loop is started. To handle received messages the <code>data_handler</code> function can be passed <code>(msg, sender) -&gt; your handling code</code>. </p><p>To control the lifetime of the loops a stop_check should be passed (() -&gt; boolean). If the stop check is true the loops will  terminate. The exact behavior depends on the implementation though.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.notify_register-Union{Tuple{T}, Tuple{Protocol{T}, String}} where T" href="#Mango.notify_register-Union{Tuple{T}, Tuple{Protocol{T}, String}} where T"><code>Mango.notify_register</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Protocol specific updates called when a new agent is registered.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.parse_id-Union{Tuple{T}, Tuple{Protocol{T}, Any}} where T" href="#Mango.parse_id-Union{Tuple{T}, Tuple{Protocol{T}, Any}} where T"><code>Mango.parse_id</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Parse different types to the correct type (if required). Should be implemented if the id type is not trivial.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send-Union{Tuple{T}, Tuple{Protocol{T}, T, Any}} where T" href="#Mango.send-Union{Tuple{T}, Tuple{Protocol{T}, T, Any}} where T"><code>Mango.send</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Send the message <code>message</code> to the agent known by the adress <code>destination</code>. How the message is exactly handled is  determined by the protocol invoked. </p><p>The type of the destination has to match with the protocol. </p><p><strong>Returns</strong></p><p>The function returns a boolean indicating whether the message was successfull sent</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.protocol_addr-Tuple{SimulationContainer}" href="#Mango.protocol_addr-Tuple{SimulationContainer}"><code>Mango.protocol_addr</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get protocol addr part</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.register" href="#Mango.register"><code>Mango.register</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Register an agent given the target container <code>container</code>. While registering an aid will be generated and assigned to the agent.</p><p>This function will add the agent to the internal list of the container and will from then on be controlled by the container regarding the messaging activities. That means the container acts as the gateway of the agent defining its possible way to retrieve  messages.</p><p><strong>Args</strong></p><p>suggested_aid: you can provide an aid yourself. The container will always use that aid 	if possible</p><p><strong>Returns</strong></p><p>The actually used aid will be returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send_message" href="#Mango.send_message"><code>Mango.send_message</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Send a message <code>message</code> with using the given container <code>container</code> to the agent with the receiver id <code>receiver_id</code>. The receivers address  is used by the chosen protocol to appropriatley route the message to external participants. To specifiy further meta data of the message <code>kwargs</code> should be used.</p><p><strong>Returns</strong></p><p>True if the message has been sent successfully, false otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.shutdown-Tuple{SimulationContainer}" href="#Mango.shutdown-Tuple{SimulationContainer}"><code>Mango.shutdown</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Shut down the container. It is always necessary to call it for freeing bound resources</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.close-Tuple{TCPProtocol}" href="#Base.close-Tuple{TCPProtocol}"><code>Base.close</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Release all tcp resources</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.init-Tuple{TCPProtocol, Function, Function}" href="#Mango.init-Tuple{TCPProtocol, Function, Function}"><code>Mango.init</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Initialized the tcp protocol. This starts the receiver and stop loop. The receiver loop will call the data_handler with every incoming message. Further it provides as sender adress a InetAddr object. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.send-Tuple{TCPProtocol, Sockets.InetAddr, Vector{UInt8}}" href="#Mango.send-Tuple{TCPProtocol, Sockets.InetAddr, Vector{UInt8}}"><code>Mango.send</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Send a message <code>message</code> over plain TCP using <code>destination</code> as destination address. The message has to be provided  as a form, which is writeable to an arbitrary IO-Stream.</p><p><strong>Returns</strong></p><p>Return true if successfull.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><h1 id="Simulation"><a class="docs-heading-anchor" href="#Simulation">Simulation</a><a id="Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation" title="Permalink"></a></h1><p>In the following the APIs regarding the simulation container are listed.</p><h1 id="Scheduling"><a class="docs-heading-anchor" href="#Scheduling">Scheduling</a><a id="Scheduling-1"></a><a class="docs-heading-anchor-permalink" href="#Scheduling" title="Permalink"></a></h1><p>In the following the APIs for scheduling TaskData is listed.</p><h1 id="Topology"><a class="docs-heading-anchor" href="#Topology">Topology</a><a id="Topology-1"></a><a class="docs-heading-anchor-permalink" href="#Topology" title="Permalink"></a></h1><p>In the following the APIs for creating, aplying and using topologies is listed.</p><article class="docstring"><header><a class="docstring-binding" id="Graphs.SimpleGraphs.add_edge!-Tuple{Topology, Int64, Int64}" href="#Graphs.SimpleGraphs.add_edge!-Tuple{Topology, Int64, Int64}"><code>Graphs.SimpleGraphs.add_edge!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_edge!(topology, node_id_from, node_id_to, directed=false)</code></pre><p>Add an edge to the topology from <code>node_id_from</code> to <code>node_id_to</code>. If <code>directed</code> is true a directed edge is added, otherwise an undirected edge is added.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add!-Tuple{Mango.Node, Vararg{Agent}}" href="#Mango.add!-Tuple{Mango.Node, Vararg{Agent}}"><code>Mango.add!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add!(node, agent::Agent...)</code></pre><p>Add an <code>agents</code> to the <code>node</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.add_node!-Tuple{Topology, Vararg{Agent}}" href="#Mango.add_node!-Tuple{Topology, Vararg{Agent}}"><code>Mango.add_node!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_node!(topology, agents::Agent...)::Int</code></pre><p>Add a node to the topology with a list (or a single) of agents attached.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.complete_topology-Tuple{Int64}" href="#Mango.complete_topology-Tuple{Int64}"><code>Mango.complete_topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">complete_topology(number_of_nodes)</code></pre><p>Create a fully-connected topology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.create_topology-Tuple{Function}" href="#Mango.create_topology-Tuple{Function}"><code>Mango.create_topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_topology(create_runnable)::Topology</code></pre><p>Create a topology using the <code>create_runnable</code> function which is a one-argument function with an initially empty topology as argument.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">topology = create_topology() do topology
    agent = register(container, TopologyAgent())
    agent2 = register(container, TopologyAgent())
    agent3 = register(container, TopologyAgent())
    n1 = add_node!(topology, agent)
    n2 = add_node!(topology, agent2)
    n3 = add_node!(topology, agent3)
    add_edge!(topology, n1, n2)
    add_edge!(topology, n1, n3)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.cycle_topology-Tuple{Int64}" href="#Mango.cycle_topology-Tuple{Int64}"><code>Mango.cycle_topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cycle_topology(number_of_nodes)</code></pre><p>Create a cycle topology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.graph_topology-Tuple{Graphs.AbstractGraph}" href="#Mango.graph_topology-Tuple{Graphs.AbstractGraph}"><code>Mango.graph_topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">graph_topology(graph)</code></pre><p>Create a topology based on a Graphs.jl (abstract) graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.per_node-Tuple{Function, Topology}" href="#Mango.per_node-Tuple{Function, Topology}"><code>Mango.per_node</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">per_node(assign_runnable, topology)</code></pre><p>Loops over the nodes of the <code>topology</code>, calls <code>assign_runnable</code> on every node to enable the caller to populate the node. After the loop finished the neighborhoods are created and injected into the agent. </p><p><strong>Example</strong></p><pre><code class="language-julia hljs">per_node(topology) do node
    add!(node, register(container, TopologyAgent()))
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.star_topology-Tuple{Int64}" href="#Mango.star_topology-Tuple{Int64}"><code>Mango.star_topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">star_topology(number_of_nodes)</code></pre><p>Create a star topology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.topology_neighbors-Tuple{Agent}" href="#Mango.topology_neighbors-Tuple{Agent}"><code>Mango.topology_neighbors</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">topology_neighbors(agent)</code></pre><p>Retrieve the neighbors of the <code>agent</code>, represented by their addresses. These vaues will be updated when a topology is applied using <code>per_node</code> or <code>create_topology</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><h1 id="Encoding/Decoding"><a class="docs-heading-anchor" href="#Encoding/Decoding">Encoding/Decoding</a><a id="Encoding/Decoding-1"></a><a class="docs-heading-anchor-permalink" href="#Encoding/Decoding" title="Permalink"></a></h1><p>In the following the built-in functions for encoding and decoding messages are listed.</p><article class="docstring"><header><a class="docstring-binding" id="Mango.decode" href="#Mango.decode"><code>Mango.decode</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">decode(buf::Vector{UInt8}, t::Type=OrderedDict{String, Any})</code></pre><p>Decode the data in <code>buf</code> into an object of type <code>t</code> using <code>LightBSON.bson_read</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; data = OrderedDict([&quot;test&quot; =&gt; 10])
OrderedDict{String, Int64} with 1 entry:
  &quot;test&quot; =&gt; 10

julia&gt; decode(encode(data))
OrderedDict{String, Any} with 1 entry:
  &quot;test&quot; =&gt; 10</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Mango.encode-Tuple{Any}" href="#Mango.encode-Tuple{Any}"><code>Mango.encode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">encode(data::OrderedDict{String,Any})</code></pre><p>Encode <code>data</code> into a UInt8 buffer using LightBSON.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; data = OrderedDict([&quot;test&quot; =&gt; 10])
OrderedDict{String, Int64} with 1 entry:
  &quot;test&quot; =&gt; 10

julia&gt; encode(data)
19-element Vector{UInt8}:
 0x13
 0x00
 0x00
 0x00
 0x12
    ⋮
 0x00
 0x00
 0x00
 0x00
 0x00</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OFFIS-DAI/Mango.jl">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../topology/">« Topologies</a><a class="docs-footer-nextpage" href="../legals/">Legals »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 20 August 2024 15:31">Tuesday 20 August 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
